2002-09-17  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* gpdf-embeddable.cc (load_pdf_from_stream): don't try to check
	for catalog after having discovered that !pdf->isOk and having
	already deleted it. I introduced my first goto to this code.
	Edsger Dijkstra in memoriam

2002-09-15  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* Makefile.am: don't build gpdf here

	* gpdf.cc: move to ../shell/gpdf.c

2002-09-14  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* gpdf-embeddable-view.cc (destroy_view): kill already commented
	out, previously unused destructor
	(gev_destroy): set mainbox member = NULL

	* pdf-view.cc (pv_destroy): new destructor
	(class_init): use it, init parent_class
	(pdf_view_construct): reindent

2002-09-14  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* gpdf-embeddable-view.h (GPdfEmbeddableView): kill bed member

	* gpdf-embeddable-view.cc: removed newlines from g_message calls
	(class_init): use checked casts, we now have destroy, no need to
	keep a ref to our embeddable here
	(gev_destroy): new destructor

2002-09-14  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* gpdf-embeddable-view.cc (gpdf_embeddable_view_new):
	s/printf/g_message/
	(view_create_menus, view_remove_menus): rename to
	(gev_set_ui_container, gev_unset_ui_container): and rewrite in EOG
	style

2002-09-13  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* gpdf-embeddable-view.cc (gev_activate): chain up to parent's
	activate handler, not to grand parent's

2002-09-13  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* bonobo-application-x-pdf.cc (embeddable_factory): don't
	initialize embeddable (where did that come from?)

	* gpdf-embeddable-view.cc (gpdf_embeddable_view_construct): don't
	handle "activate" by connecting...
	(class_init): ...install a default signal handler...
	(gev_activate): cleaned up "activate" handler, renamed from 
	(view_activate)

2002-09-13  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* Makefile.am: add pdf-view.cc, pdf-view.h

	* gpdf-embeddable-view.cc (view_is_good, first_page, last_page)
	(next_page, prev_page, configure_size, setup_size, setup_pixmap)
	(render_page, realize_mainbox, redraw_view_all, real_redraw_view)
	(redraw_view): kill
	(first_page, last_page, next_page, prev_page, redraw_view_all):
	only declare here, use definitions from pdf-view.cc
	(page_first_cb, page_next_cb, page_prev_cb, page_last_cb):
	s/view_data_t/PdfView/ etc.
	(view_switch_page): kill
	(zoom_to_fit): leave only declaration
	(view_zoom_verb, page_zoom_fit_width_cb, page_zoom_fit_height_cb) 
	(page_enlarge_cb, page_shrink_cb, view_zoom_query): s///
	(verbs[]): make static
	(view_create_menus, view_remove_menus, view_activate): s///
	(button_press_event_cb, gesture_page_event_cb) 
	(gesture_zoom_event_cb): kill
	(key_press_event_cb): s///, only handle scrolling here
	(mainbox_realize): kill
	(destroy_view): comment out for now
	(init): empty
	(gpdf_embeddable_view_construct): mainbox = pdf_view_new,
	remove mainbox construction code

	* pdf-view.cc (view_is_good): s/view_data_t/PdfView/
	(first_page, last_page, next_page, prev_page): non-static
	(setup_pixmap): view_data is our mainbox now
	(render_page): s/view_data_t/PdfView/ s/view_data/view/
	(redraw_view_all): ditto
	(realize_mainbox): /GPdfEmbeddableView/PdfView/ etc.
	(real_redraw_view): ditto
	(redraw_view): ditto, view is our mainbox now
	(page_first_cb, page_next_cb, page_prev_cb, page_last_cb): kill
	here (verb implementations)
	(view_switch_page): s/// as above
	(zoom_to_fit): non-static, commented out for now
	(view_zoom_verb, view_zoom_query): s/// as above
	(page_zoom_fit_width_cb, page_zoom_fit_height_cb)
	(page_enlarge_cb, page_shrink_cb): kill here (verb impl)
	(verbs[], view_create_menus, view_remove_menus, view_activate):
	kill here (bonobo stuff)
	(gesture_page_event_cb, gesture_zoom_event_cb): s///
	(key_press_event_cb): don't handle scrolling here, s///
	(destroy_view): kill here
	(pdf_view_construct): kill everything except mainbox construction
	

	* gpdf-embeddable-view.h: view_data_t is no longer a typedef'd
	GPdfEmbeddableView. Remove PdfView related members from
	GPdfEmbeddableView

	* pdf-view.h: s/GPdfEmbeddableView/PdfView/ with some AI ;)
	GPdfEmbeddableView still typedef'd view_data_t. Super class
	is GtkEventBox

	Split bonobo / non-bonobo parts of GPdfEmbeddableView:
	
	* pdf-view.h: new file (cvs copy of gpdf-embeddable.h)

	* pdf-view.c: ditto. These will contain non-bonobo parts

2002-09-08  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* GOutputDev.h: add missing gdk include

	* GOutputDev.cc (GOutputDev::drawLink): don't #if 0, just don't
	use it
	(GOutputDev::drawImage, GOutputDev::drawImageMask): use Michael's
	broken image handling code from gpdf 0.90.1 instead of my even
	more broken code

	* gpdf-embeddable-view.cc (render_page): disable links here.
	(realize_mainbox): view == view_data now. Don't have to
	gtk_object_get_data anymore
	(real_redraw_view): ditto
	(redraw_view): ditto, make it static again
	(gpdf_embeddable_view_construct): connect redraw_view to
	pdf_changed signal, don't gtk_object_set_data "view_data"
	(view_switch_page, view_zoom_verb, view_activate)
	(button_press_event_cb, gesture_page_event_cb)
	(gesture_zoom_event_cb, key_press_event_cb, mainbox_realize): make
	them static again

	* gpdf-embeddable.cc (class_init): add "pdf_changed" signal
	(load_pdf_from_stream): emit it, don't redraw_view explicitly

	* gpdf-embeddable.h: add signal to class struct

2002-09-01  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* gpdf-embeddable.cc (gpdf_embeddable_view_factory): move here
	from bonobo-application-x-pdf.cc

	* GOutputDev.cc (GOutputDev::drawLink): comment out for
	now. Segfaults. I don't understand this.

	* bonobo-application-x-pdf.cc: move view_data_t related code
	( except view_factory) to gpdf-embeddable-view.cc, remove lots of
	includes

	* gpdf-embeddable-view.h: new files with new GPdfEmbeddableView
	class

	* gpdf-embeddable-view.cc: 

	* gtkgesture.h: double include protection

	* XOutputDev.h: add missing include "Object.h"

	* GOutputDev.h: add missing include "Object.h"

2002-08-31  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* gpdf-embeddable.cc: 

	* gpdf-embeddable.h: bed_t: Replace Data Value with Object
	[Fowler] i.e.  turn it into the GPdf::Embeddable class.

	* bonobo-application-x-pdf.cc: temporarily make some functions
	non-static
	(view_is_good): move up in file, use it in more places.
	(setup_pixmap): remove window parameter, get it from view_data
	(destroy_embed): move to GPdfEmbeddable::destroy
	(embeddable_factory): drastically simplify, work is done in
	GPdfEmbeddable::new and friends
	remove count of running_objects.
	
	* gpdf-util.h: new file
	(E_MAKE_TYPE): copied from gal

2002-08-29  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* bonobo-application-x-pdf.cc: move struct bed_t to
	gpdf-embeddable.{cc,h}
	(setup_pixmap) remove doc parameter. (Get it from view_data param)
	
	* gpdf-embeddable.cc: New files to contain the embeddable class

	* gpdf-embeddable.h:  

	* gpdf.cc (main): remove call to setlocale (done in
	gnome_init...), ignore return value of oaf_init, let bonobo_init
	figure out which orb to use.
	
	* Link.h: declare some methods as const.
	* Link.cc:

2002-08-12  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* GOutputDev.cc: make it compile (without Type 3 support for now)

	* bonobo-application-x-pdf.cc: Derek has removed the global xref
	variable. Remove the ``Ugly global xref fix''

2002-08-09  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* BonoboStream.h: ditto.

	* BonoboStream.cc: sync with FileStream.

	Merge in Xpdf 1.01 files

	* GOutputDev.cc (drawImage), (drawImageMask): use gdk_image_get
	as XGetSubImage 

2002-08-05  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* GOutputDev.h: ditto. 

	* GOutputDev.cc: sync with XOutputDev.cc.

	* bonobo-application-x-pdf.cc (printCommands): is in Gfx.cc now

2002-08-04  Martin Kretzschmar  <Martin.Kretzschmar@inf.tu-dresden.de>

	* BonoboStream.cc: merge in decryption code from FileStream 0.92
	(close): new method, from FileStream,
	(~bonoboStream): use close

	* BonoboStream.h: #define bonoboStreamBufSize as in FileStream
	0.92, 
	(bonoboStream): use it.

2001-01-11  Michael Meeks  <michael@helixcode.com>

	* gpdf.cc (container_launch_component): don't add the client
	site to the item container.

2000-12-21  Michael Meeks  <michael@helixcode.com>

	* bonobo-application-x-pdf.cc: Kill mutex / thread init code,
	it screws gtk.

	* gpdf.cc: update the IID naming scheme.

	* bonobo-application-x-pdf.cc (init_bonobo_application_x_pdf_factory):
	ditto. (init_server_factory): setup ORB properly.

	* Makefile.am: De-goadize; update oafinfo fnames.

2000-11-16  Ramiro Estrugo  <ramiro@eazel.com>

	* bonobo-application-x-pdf.cc:
	Make the signatures of callbacks match the declaraed types to
	avoid compiler warnings.
	
2000-11-07  Fatih Demir	<kabalak@gmx.net>

	* .cvsignore: Added bonobo-application-x-pdf-ui.h and
		gpdf-ui.h to the ignores.

2000-10-19  Michael Meeks  <michael@helixcode.com>

	* gpdf.cc: update for Dietmer internal changes.

2000-10-17  Michael Meeks  <michael@helixcode.com>

	* gpdf.xml: add.

	* Makefile.am: sort out xml files.

	* gpdf.cc: Re-engineer to the new UI handler.

	* bonobo-application-x-pdf.cc: update to new UI handler

	* bonobo-appliation-x-pdf-ui.xml: create.

	* gpdf-ui.xml: create.

2000-10-07  Michael Meeks  <michael@helixcode.com>

	* gpdf.cc (main): cut out stale gnorba fat.

	* bonobo-application-x-pdf.cc (init_server_factory),
	(init_bonobo_application_x_pdf_factory): ditto.

	* bonobo-application-x-pdf.cc (embeddable_factory): remove the
	sizeable interface.

2000-10-04  Michael Meeks  <michael@helixcode.com>

	* bonobo-application-x-pdf.cc (view_create_menus): upd.

	* gpdf.cc (container_launch_component): update for ItemContainer
	rename. (container_new): update to bonobo-win stuff.
	(container_set_view): use compat_get_container.

2000-08-13  Arik Devens  <arik@helixcode.com>

	* bonobo-application-x-pdf.cc (view_create_menus): Switched
	page_enlarge_cb and page_shrink_cb to get zooming in and out
	workin correctly in the menu.

2000-08-02  Michael Meeks  <michael@helixcode.com>

	* Makefile.am (gpdf_LDADD): kill ghastly hack adding -lbonobo.
	(bonobo_application_x_pdf_LDADD): add EXTRA_GNOME_LIBS

2000-07-25  Michael Meeks  <michael@helixcode.com>

	* bonobo-application-x-pdf.cc (embeddable_factory): s/gtk/bonobo/
	on unref. Junk 2 stop tabs throught, Derek can have my kittens.
	(view_create_menus): create the pdf toolbar before using it.
	(button_press_event_cb): return a value.

2000-07-04  Michael Meeks  <michael@helixcode.com>

	* GOutputDev.cc (drawImage): kill double free.

	* BonoboStream.cc (bfread): update for new API.

2000-03-10  Michael Meeks  <michael@helixcode.com>

	* gpdf.cc: s/GNOME/Bonobo/

	* application-x-pdf.gnorba: s/GNOME/Bonobo/

2000-02-28  Michael Meeks  <michael@helixcode.com>

	* bonobo-application-x-pdf.cc (view_factory): kill spurious UI
	handler creation.

	* gpdf.cc (container_set_view): update to new bonobo api.

2000-02-25  NotZed  <NotZed@HelixCode.com>

	* Makefile.am: Fixed up lists of sources so that distcheck works.
	Also, only build gpdf if with gnome (otherwise distcheck fails).

	* gpdf.cc (container_about_cmd): Define i if we are going
	to be using it.

2000-02-09  Michael Meeks  <michael@helixcode.com>

	* Clean unused & lack of casting all round the place.
	
2000-02-07  Michael Meeks  <michael@helixcode.com>

	* bonobo-application-x-pdf.cc: fix typo.

1999-12-17  Michael Meeks  <mmeeks@gnu.org>

	* gpdf.cc (container_set_view): make wrapper invisible.

	* bonobo-application-x-pdf.cc (embeddable_factory): kill
	diff id string. + constify lots of paths.
	(view_factory): kill size query. (view_size_query): kill.

1999-11-06  Michael Meeks  <mmeeks@gnu.org>

	* gtkgesture.c (gesture_data_append_point): fix leak.

	* bonobo-application-x-pdf.c (setup_pixmap): Fix leak + flicker.

	* GOutputDev.cc (~GOutputDev): Add clear of state stack + clear
	text page + delete font. (startPage): fic gdkGC leaks.
	(findColor): clean.

1999-10-11  Michael Meeks  <mmeeks@gnu.org>

	* GOutputDev.cc: Re-enable stroke color setting.

1999-10-08  Michael Meeks  <mmeeks@gnu.org>

	* gpdf.cc (container_new): add to list before possibly removing.

	* bonobo-application-x-pdf.cc (destroy_embed): Quit on last component
	close. (load_pdf_from_stream): inline redraw-all with new API.
	(redraw_view): implement (redraw_all): remove. (realize_mainbox): remould.
	(destroy_view): Fix serious memory corruption freeing pixmap twice.
	(view_activate): kill debug.

1999-10-06  Peter Teichman  <pat4@acpub.duke.edu>

	* GOutputDev.cc: add return type for GOutputServerFont::isOk()

	* bonobo-application-x-pdf.cc: casting fixes, for compiling with
	recent gcc

	* PSOutputDev.cc: same, more casting fixes
	
1999-10-06  Michael Meeks  <mmeeks@gnu.org>

	* BonoboStream.cc (bfseek): Add debug case.
	(bfread): nail immense leak.

	* gpdf.cc (container_set_view): Activate the component to
	allow gestures to work.

1999-10-05  Michael Meeks  <mmeeks@gnu.org>

	* bonobo-application-x-pdf.cc (setup_pixmap): Connect gestures + add
	event mask.

	* gpdf.cc (container_close): Created. (container_close_cmd): Use it.
	Huge header clean.

	* gtkgesture.[ch]: Create.

1999-09-11  Michael Meeks  <michael@nuclecu.unam.mx>

	* bonobo-application-x-pdf.cc (destroy_view): destroy don't unref,
	make more paranoid add debug. (destroy_embed): Clean. 

	* gpdf.cc (key_press_event_cb): Added all manner of shortcuts.
	(container_new): Add key stuff (container_destroy_cb): Implement.
	(container_destroy): Add paranoid check.

1999-09-07  Michael Meeks  <michael@imaginator.com>

	* gpdf.cc (container_new): Fiddled with scrollpane

1999-09-01  Michael Meeks  <michael@imaginator.com>

	* bonobo-application-x-pdf.cc: Fix a massive leak :-).
	Considerably simplified with GtkPixmap. Fixed location problems.

1999-08-27  Michael Meeks  <michael@imaginator.com>

	* bonobo-application-x-pdf.cc: Remove count of embeddable
	servers: seems to be handled inside Bonobo now.

1999-08-26  Michael Meeks  <michael@imaginator.com>

	* gpdf.cc (component_destroy): Improved clean up.

	* bonobo-application-x-pdf.cc (bed_free_data): Expand, and
	clean; remove redundant pdf_stream delete.

1999-08-24  Michael Meeks  <michael@imaginator.com>

	* application-x-pdf.gnorba: Update to new mime type.

	* Makefile.am (gnorba_DATA): Rename mime type.
	Remove glade.

	* gpdf.cc (main): File up a container if we fail to load
	any of the command line files.

1999-08-24  Michael Meeks  <michael@imaginator.com>

	* Makefile.am: Cleaned + added thread bits.

	* bonobo-image-x-pdf.cc: Add locking round 'xref' global.
	Remove CORBA_Environment global.

1999-08-24  Michael Meeks  <michael@imaginator.com>

	* bonobo-image-x-pdf.cc (bed_free_data): Rationalised Stream
	duplicate / release, and scoped BonoboFile correctly.

	* BonoboStream.cc (bfseek): Add init / free to all corba
	exceptions, ( stupidly lost this code somehow ).

	* bonobo-image-x-pdf.cc (render_page): Add startDoc.
	(main): Add freeParams.

1999-08-23  Michael Meeks  <michael@imaginator.com>

	* gpdf.cc (container_launch_component): Fix flags.
	(container_create_toolbar): Fix for new Bonobo.

1999-08-23  Michael Meeks  <michael@imaginator.com>

	* Makefile.am: Added helper programs back in.

	* bonobo-image-x-pdf.cc (view_create_menus): Toolbars.

1999-08-23  Miguel de Icaza  <miguel@gnu.org>

	* bonobo-image-x-pdf.cc: Replace exit() with gtk_main_quit()

1999-08-22  Miguel de Icaza  <miguel@gnu.org>

	* bonobo-image-x-pdf.cc (main): Add error checking for factory
	registration. 

1999-08-22  Michael Meeks  <michael@imaginator.com>

	* bonobo-image-x-pdf.cc: Add zoom.

1999-08-19  Michael Meeks  <michael@imaginator.com>

	* PDFDoc.cc: Altered to read / write lines.

	* PDFDoc.cc: Move FileStream::checkHeader so its called
	in FileStream constructor.

1999-08-18  Michael Meeks  <michael@imaginator.com>

	* gpdf.cc: cloned from test-container.
	(launch_server): use GOAD_ACTIVATE_SHLIB not '0'

1999-08-16  Michael Meeks  <michael@imaginator.com>

	* Makefile.am (bin_PROGRAMS): Hack to only make bonobo component.

	* bonobo-image-x-pdf.cc (view_factory): Init all members.

1999-08-15  Michael Meeks  <michael@imaginator.com>

	* Now bonobo-image-x-pdf works, but everything else
	is broken: use

		make bonobo-image-xpdf to compile...

1999-08-11  Michael Meeks  <michael@imaginator.com>

	* bonobo-image-x-pdf.cc: Fixed innumerable bugs,
	some in bonobo :-)
	(load_image_from_stream): Try closing the file to let its
	contents hit disk before reading from it :-)
	(configure_size): Don't get scared by configure_size.
	(redraw_view): Get the parameters in some sort of order.

1999-08-11  Michael Meeks  <michael@imaginator.com>

	* bonobo-image-x-pdf.cc: Added.

	* Makefile.am: added bonobo-image-x-pdf.c

1999-08-03  Michael Meeks  <michael@imaginator.com>

	* gpdf.cc: Lots of updates, gives up on logging changes
	( for a bit. )

1999-08-02  Michael Meeks  <michael@edenproject.org>

	* GOutputDev.cc: Fix more silly region merging bugs.

1999-08-01  Michael Meeks  <michael@edenproject.org>

	* Makefile.in: Added -lglade, -lglade-gnome & Added -Wall
	
	* gpdf.glade: Added.
	
	* gpdf.cc (loadFile): Add typecast.
	Remove all DOC_ROOT's magic numbers.
	Add glade GUI,
	Lots of other bits ...
	
1999-07-29  Michael Meeks  <michael@edenproject.org>

	* GOutputDev.cc: Hahaaa... the bug ! :-)
	A difference in how GDK / X deal with merging rectangles
	and regions. Good.

	* gpdf.cc (doc_redraw_event): Messing around.

	* GOutputDev.cc (drawChar): Fix char printed as string.

1999-06-09  Michael Meeks  <michael@edenproject.org>

	* gpdf.cc (main): Add error init.

1999-06-03  Michael Meeks  <michael@edenproject.org>

	* GOutputDev.cc (GOutputDev): Actually set up pixmapW & H
	(GOutputDev): Setup 'depth' correctly.

	* gpdf.cc (main): Moved freeParams() to after the main
	loop !

	* Params.cc (initParams): Added assert on fontPathLen.
	(freeParams): Clean global pointers on free.

	* Makefile.in (CXXFLAGS): Added LTKSRCDIR and
	Xpm_CFLAGS to CXXFLAGS.

1999-05-29  Michael Meeks  <michael@edenproject.org>

	* Makefile.in (GPDF_OBJS): Remove XOutputDev
	(all): Remove all but gpdf.

	* gpdf.cc: Add define GString / undef.
	(main): Argc not Argv :)

	* GOutputDev.cc (findColor): Made pigs ear of colour
	mappings.

1999-05-28  Michael Meeks  <michael@imaginator.com>

	* GOutputDev.cc (drawChar16): XChar2b -> GdkWChar

1999-05-27  Michael Meeks  <michael@imaginator.com>

	* GOutputDev.cc (GOutputFont): Hacks.
	(GOutputFont): Renamed.
	(getFont): killed redundant 'display'
	getGdkFont not getXFont.
	(GOutputDev): NB. colormap -> gtk_widget_get_default_colormap ()
	which returns GdkColormap *, killed colormap & depth1 in prototype.
	Removed redundant assigns.
	NB. Miguel says 'miguel> michael: a GdkPixmap is a GdkWindow'
	Many misc. fixes upto convertSubPath.

	* GOutputDev.h: Comments 'G'd and GOutputDev updated.
	XPoint -> GdkPoint

	* Makefile.in (CXXFLAGS): Add GOOSRCDIR.

